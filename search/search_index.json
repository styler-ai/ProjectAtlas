{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"ProjectAtlas ProjectAtlas gives agents a fast structural overview before deep indexing. It reads per-file Purpose headers and per-folder .purpose summaries, then produces a TOON snapshot that is easy to scan at startup. Use it to choose the right files quickly and avoid duplicate folders or scattered intent. Quick start projectatlas init --seed-purpose Fill .purpose files and Purpose headers. projectatlas map projectatlas lint --strict-folders --report-untracked Why it matters Without a structural map, agents waste context by reading the wrong files and recreate folders because intent is hidden. ProjectAtlas adds a lightweight layer above code-index tools so you can ask \"where should I look?\" before running deeper scans.","title":"Overview"},{"location":"#projectatlas","text":"ProjectAtlas gives agents a fast structural overview before deep indexing. It reads per-file Purpose headers and per-folder .purpose summaries, then produces a TOON snapshot that is easy to scan at startup. Use it to choose the right files quickly and avoid duplicate folders or scattered intent.","title":"ProjectAtlas"},{"location":"#quick-start","text":"projectatlas init --seed-purpose Fill .purpose files and Purpose headers. projectatlas map projectatlas lint --strict-folders --report-untracked","title":"Quick start"},{"location":"#why-it-matters","text":"Without a structural map, agents waste context by reading the wrong files and recreate folders because intent is hidden. ProjectAtlas adds a lightweight layer above code-index tools so you can ask \"where should I look?\" before running deeper scans.","title":"Why it matters"},{"location":"adoption/","text":"Adoption Checklist Use this checklist when adding ProjectAtlas to an existing repo. 1. Install pip install -e . 2. Initialize projectatlas init --seed-purpose projectatlas init auto-detects repo languages to seed scan.source_extensions and purpose.styles_by_extension . Use --no-detect-languages to keep the static template. 3. Fill folder summaries Add a one-line summary to every .purpose file. Keep summaries short and single-line. 4. Add Purpose headers Add a Purpose: header to every tracked source file using the configured comment style. Python modules should use a module docstring with Purpose: . 5. Track non-source files Add summaries for non-source files in .projectatlas/projectatlas-nonsource-files.toon (agent-maintained input). 6. Generate the map projectatlas map 7. Lint projectatlas lint --strict-folders --report-untracked 8. Wire into local scripts Example package.json : { \"scripts\": { \"projectatlas:map\": \"projectatlas map\", \"projectatlas:lint\": \"projectatlas lint --strict-folders --report-untracked\" } } Example Makefile : projectatlas-map: @projectatlas map projectatlas-lint: @projectatlas lint --strict-folders --report-untracked 9. Agent setup Add the startup snippet from templates/AGENTS.md to your AGENTS.md . Copy the Codex skill to ~/.codex/skills/ProjectAtlas.md if you use Codex.","title":"Adoption"},{"location":"adoption/#adoption-checklist","text":"Use this checklist when adding ProjectAtlas to an existing repo.","title":"Adoption Checklist"},{"location":"adoption/#1-install","text":"pip install -e .","title":"1. Install"},{"location":"adoption/#2-initialize","text":"projectatlas init --seed-purpose projectatlas init auto-detects repo languages to seed scan.source_extensions and purpose.styles_by_extension . Use --no-detect-languages to keep the static template.","title":"2. Initialize"},{"location":"adoption/#3-fill-folder-summaries","text":"Add a one-line summary to every .purpose file. Keep summaries short and single-line.","title":"3. Fill folder summaries"},{"location":"adoption/#4-add-purpose-headers","text":"Add a Purpose: header to every tracked source file using the configured comment style. Python modules should use a module docstring with Purpose: .","title":"4. Add Purpose headers"},{"location":"adoption/#5-track-non-source-files","text":"Add summaries for non-source files in .projectatlas/projectatlas-nonsource-files.toon (agent-maintained input).","title":"5. Track non-source files"},{"location":"adoption/#6-generate-the-map","text":"projectatlas map","title":"6. Generate the map"},{"location":"adoption/#7-lint","text":"projectatlas lint --strict-folders --report-untracked","title":"7. Lint"},{"location":"adoption/#8-wire-into-local-scripts","text":"Example package.json : { \"scripts\": { \"projectatlas:map\": \"projectatlas map\", \"projectatlas:lint\": \"projectatlas lint --strict-folders --report-untracked\" } } Example Makefile : projectatlas-map: @projectatlas map projectatlas-lint: @projectatlas lint --strict-folders --report-untracked","title":"8. Wire into local scripts"},{"location":"adoption/#9-agent-setup","text":"Add the startup snippet from templates/AGENTS.md to your AGENTS.md . Copy the Codex skill to ~/.codex/skills/ProjectAtlas.md if you use Codex.","title":"9. Agent setup"},{"location":"agent-integration/","text":"Agent Integration ProjectAtlas is designed to be read at agent startup so you can: Pick the correct file quickly. Spot duplicated folder roles early. Keep structure clean as the repo grows. Codex / AGENTS.md snippet ## Startup 1. Run `projectatlas map` (or ensure your build does). 2. Read `.projectatlas/projectatlas.toon`. 3. Scan `folder_tree[]` for where to work and `folders[]`/`files[]` for precise targets. 4. Check `folder_summary_duplicates[]` / `file_summary_duplicates[]` and flag drift. 5. Run `projectatlas lint --strict-folders --report-untracked`. 6. If lint fails, add missing Purpose headers or `.purpose` files (or remove stale items) before continuing. 7. Only then run deep indexing (code-index, LSPs) on the files you selected from the atlas. Note: the non-source file list (`.projectatlas/projectatlas-nonsource-files.toon`) is agent-maintained input for non-source summaries and is merged into the atlas. Agents still read only the generated atlas. Codex skills ProjectAtlas ships a Codex skill at .codex/skills/ProjectAtlas.md . Copy that file into your Codex workspace or keep it in place so Codex can load the ProjectAtlas workflow. Claude / skills Drop the skills/claude/ProjectAtlas.md into your Claude skills folder and reference it in your agent setup. Lint and CI ProjectAtlas lint is meant for local workflows. Many teams skip map generation in CI, but still run lint on PRs to surface missing headers. Use projectatlas map --force if CI must regenerate the map.","title":"Agent Integration"},{"location":"agent-integration/#agent-integration","text":"ProjectAtlas is designed to be read at agent startup so you can: Pick the correct file quickly. Spot duplicated folder roles early. Keep structure clean as the repo grows.","title":"Agent Integration"},{"location":"agent-integration/#codex-agentsmd-snippet","text":"## Startup 1. Run `projectatlas map` (or ensure your build does). 2. Read `.projectatlas/projectatlas.toon`. 3. Scan `folder_tree[]` for where to work and `folders[]`/`files[]` for precise targets. 4. Check `folder_summary_duplicates[]` / `file_summary_duplicates[]` and flag drift. 5. Run `projectatlas lint --strict-folders --report-untracked`. 6. If lint fails, add missing Purpose headers or `.purpose` files (or remove stale items) before continuing. 7. Only then run deep indexing (code-index, LSPs) on the files you selected from the atlas. Note: the non-source file list (`.projectatlas/projectatlas-nonsource-files.toon`) is agent-maintained input for non-source summaries and is merged into the atlas. Agents still read only the generated atlas.","title":"Codex / AGENTS.md snippet"},{"location":"agent-integration/#codex-skills","text":"ProjectAtlas ships a Codex skill at .codex/skills/ProjectAtlas.md . Copy that file into your Codex workspace or keep it in place so Codex can load the ProjectAtlas workflow.","title":"Codex skills"},{"location":"agent-integration/#claude-skills","text":"Drop the skills/claude/ProjectAtlas.md into your Claude skills folder and reference it in your agent setup.","title":"Claude / skills"},{"location":"agent-integration/#lint-and-ci","text":"ProjectAtlas lint is meant for local workflows. Many teams skip map generation in CI, but still run lint on PRs to surface missing headers. Use projectatlas map --force if CI must regenerate the map.","title":"Lint and CI"},{"location":"api/","text":"ProjectAtlas API This document is generated by scripts/generate_api_docs.py . __init__.py Purpose: Define the ProjectAtlas package metadata. __main__.py Purpose: Allow python -m projectatlas to run the CLI. atlas.py Purpose: Scan repositories and build ProjectAtlas record entries. Function is_excluded_rel_path Check whether a relative path should be excluded. Function file_extension Return a normalized file extension, handling .d.ts specially. Function is_source_file Check whether a file should be scanned for Purpose headers. Function iter_repo_paths Walk the repo and return tracked folders and source files. Function iter_repo_paths_with_untracked Walk the repo and return tracked and untracked paths. Function normalize_summary Normalize a Purpose summary to a single spaced line. Function summarize_extensions Summarize extensions for a sequence of file paths. Function is_under_prefix Check whether a path is under any of the provided prefixes. Function is_allowed_untracked Check whether an untracked path is allowed by policy. Function is_asset_file Check whether a file is considered an asset. Function list_existing_asset_roots List asset root prefixes that exist in the repo. Function strip_line_comment_prefix Remove the first matching line-comment prefix and trim whitespace. Function extract_purpose_from_lines Extract the Purpose summary from a sequence of lines. Function extract_javadoc_purpose Extract Purpose from a Javadoc-style header block. Function extract_block_comment_purpose Extract Purpose from a block comment header. Function extract_python_docstring_purpose Extract Purpose from a Python module docstring. Function extract_vue_purpose Extract Purpose from the first Vue or <style> block.</p> <h3 id=\"function-extract_line_comment_purpose\">Function <code>extract_line_comment_purpose</code></h3> <p>Extract Purpose from a line-comment header block.</p> <h3 id=\"function-resolve_purpose_style\">Function <code>resolve_purpose_style</code></h3> <p>Resolve the Purpose style for a file extension.</p> <h3 id=\"function-extract_purpose_header\">Function <code>extract_purpose_header</code></h3> <p>Extract the Purpose summary for a file by type.</p> <h3 id=\"function-validate_summary\">Function <code>validate_summary</code></h3> <p>Validate a Purpose summary against map rules.</p> <h3 id=\"function-build_file_records\">Function <code>build_file_records</code></h3> <p>Build file records and error lists for Purpose headers.</p> <h3 id=\"function-read_nonsource_file_entries\">Function <code>read_nonsource_file_entries</code></h3> <p>Read non-source file list entries for files without headers.</p> <h3 id=\"function-merge_nonsource_file_records\">Function <code>merge_nonsource_file_records</code></h3> <p>Merge non-source file records into the auto-discovered list.</p> <h3 id=\"function-read_folder_purpose\">Function <code>read_folder_purpose</code></h3> <p>Read a folder Purpose summary from a .purpose file.</p> <h3 id=\"function-build_folder_records\">Function <code>build_folder_records</code></h3> <p>Build folder records from per-folder .purpose files.</p> <h3 id=\"function-build_folder_tree_with_summaries\">Function <code>build_folder_tree_with_summaries</code></h3> <p>Build a stable tree snapshot with folder summaries.</p> <h3 id=\"function-build_summary_duplicates\">Function <code>build_summary_duplicates</code></h3> <p>Find duplicate summaries across records.</p> <h3 id=\"function-compute_file_hash\">Function <code>compute_file_hash</code></h3> <p>Compute the file list hash for the map output.</p> <h3 id=\"function-compute_folder_hash\">Function <code>compute_folder_hash</code></h3> <p>Compute the folder list hash for the map output.</p> <h3 id=\"function-compute_overview\">Function <code>compute_overview</code></h3> <p>Compute overview counts for the map header.</p> <h3 id=\"function-format_overview\">Function <code>format_overview</code></h3> <p>Format the overview mapping for the map header.</p> <h3 id=\"function-read_overview\">Function <code>read_overview</code></h3> <p>Read the overview line from the map file.</p> <h3 id=\"function-read_map_hashes\">Function <code>read_map_hashes</code></h3> <p>Read file and folder hashes from the current map file.</p> <h3 id=\"function-format_list\">Function <code>format_list</code></h3> <p>Format items as a newline-separated bullet list.</p> <h2 id=\"clipy\"><code>cli.py</code></h2> <p>Purpose: Provide the ProjectAtlas command-line entry points.</p> <h3 id=\"function-is_truthy_env\">Function <code>is_truthy_env</code></h3> <p>Check whether an environment value is truthy.</p> <h3 id=\"function-build_snapshot\">Function <code>build_snapshot</code></h3> <p>Build an AtlasSnapshot for the current repository.</p> <h3 id=\"function-seed_purpose_files\">Function <code>seed_purpose_files</code></h3> <p>Create missing .purpose files for tracked folders.</p> <h3 id=\"function-write_default_files\">Function <code>write_default_files</code></h3> <p>Write default configuration and non-source file template.</p> <h3 id=\"function-run_map\">Function <code>run_map</code></h3> <p>Generate and write the ProjectAtlas map.</p> <h3 id=\"function-run_lint\">Function <code>run_lint</code></h3> <p>Validate the ProjectAtlas map against current repo state.</p> <h3 id=\"function-parse_args\">Function <code>parse_args</code></h3> <p>Parse CLI arguments.</p> <h3 id=\"function-main\">Function <code>main</code></h3> <p>Run the ProjectAtlas CLI.</p> <h2 id=\"configpy\"><code>config.py</code></h2> <p>Purpose: Load and normalize ProjectAtlas configuration from TOML.</p> <h3 id=\"class-configerror\">Class <code>ConfigError</code></h3> <p>Signal an invalid ProjectAtlas configuration.</p> <h3 id=\"class-atlasconfig\">Class <code>AtlasConfig</code></h3> <p>Define the normalized configuration for ProjectAtlas.</p> <h3 id=\"function-find_config_path\">Function <code>find_config_path</code></h3> <p>Locate the first ProjectAtlas config file under the root.</p> <h3 id=\"function-_as_set\">Function <code>_as_set</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-_as_list\">Function <code>_as_list</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-_as_map\">Function <code>_as_map</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-_as_path\">Function <code>_as_path</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-load_config\">Function <code>load_config</code></h3> <p>Load ProjectAtlas configuration from TOML (or defaults).</p> <h3 id=\"function-default_config_text\">Function <code>default_config_text</code></h3> <p>Return a config.toml payload for the provided settings.</p> <h3 id=\"function-build_config_text\">Function <code>build_config_text</code></h3> <p>Build a config.toml payload from the supplied settings.</p> <h3 id=\"function-detect_language_extensions\">Function <code>detect_language_extensions</code></h3> <p>Detect source extensions in a repo using the default language list.</p> <h3 id=\"function-detect_purpose_styles\">Function <code>detect_purpose_styles</code></h3> <p>Return a Purpose style map for detected extensions.</p> <h2 id=\"modelspy\"><code>models.py</code></h2> <p>Purpose: Define data models used across ProjectAtlas.</p> <h3 id=\"class-record\">Class <code>Record</code></h3> <p>Represent a ProjectAtlas record entry.</p> <h3 id=\"class-atlassnapshot\">Class <code>AtlasSnapshot</code></h3> <p>Capture the full ProjectAtlas snapshot to write.</p> <h2 id=\"outputpy\"><code>output.py</code></h2> <p>Purpose: Write ProjectAtlas snapshots to TOON or JSON outputs.</p> <h3 id=\"function-to_toon\">Function <code>to_toon</code></h3> <p>Serialize the snapshot to TOON.</p> <h3 id=\"function-write_toon\">Function <code>write_toon</code></h3> <p>Write the snapshot to the configured TOON path.</p> <h3 id=\"function-write_json\">Function <code>write_json</code></h3> <p>Write the snapshot to a JSON file next to the TOON output.</p>","title":"API"},{"location":"api/#projectatlas-api","text":"This document is generated by scripts/generate_api_docs.py .","title":"ProjectAtlas API"},{"location":"api/#__init__py","text":"Purpose: Define the ProjectAtlas package metadata.","title":"__init__.py"},{"location":"api/#__main__py","text":"Purpose: Allow python -m projectatlas to run the CLI.","title":"__main__.py"},{"location":"api/#atlaspy","text":"Purpose: Scan repositories and build ProjectAtlas record entries.","title":"atlas.py"},{"location":"api/#function-is_excluded_rel_path","text":"Check whether a relative path should be excluded.","title":"Function is_excluded_rel_path"},{"location":"api/#function-file_extension","text":"Return a normalized file extension, handling .d.ts specially.","title":"Function file_extension"},{"location":"api/#function-is_source_file","text":"Check whether a file should be scanned for Purpose headers.","title":"Function is_source_file"},{"location":"api/#function-iter_repo_paths","text":"Walk the repo and return tracked folders and source files.","title":"Function iter_repo_paths"},{"location":"api/#function-iter_repo_paths_with_untracked","text":"Walk the repo and return tracked and untracked paths.","title":"Function iter_repo_paths_with_untracked"},{"location":"api/#function-normalize_summary","text":"Normalize a Purpose summary to a single spaced line.","title":"Function normalize_summary"},{"location":"api/#function-summarize_extensions","text":"Summarize extensions for a sequence of file paths.","title":"Function summarize_extensions"},{"location":"api/#function-is_under_prefix","text":"Check whether a path is under any of the provided prefixes.","title":"Function is_under_prefix"},{"location":"api/#function-is_allowed_untracked","text":"Check whether an untracked path is allowed by policy.","title":"Function is_allowed_untracked"},{"location":"api/#function-is_asset_file","text":"Check whether a file is considered an asset.","title":"Function is_asset_file"},{"location":"api/#function-list_existing_asset_roots","text":"List asset root prefixes that exist in the repo.","title":"Function list_existing_asset_roots"},{"location":"api/#function-strip_line_comment_prefix","text":"Remove the first matching line-comment prefix and trim whitespace.","title":"Function strip_line_comment_prefix"},{"location":"api/#function-extract_purpose_from_lines","text":"Extract the Purpose summary from a sequence of lines.","title":"Function extract_purpose_from_lines"},{"location":"api/#function-extract_javadoc_purpose","text":"Extract Purpose from a Javadoc-style header block.","title":"Function extract_javadoc_purpose"},{"location":"api/#function-extract_block_comment_purpose","text":"Extract Purpose from a block comment header.","title":"Function extract_block_comment_purpose"},{"location":"api/#function-extract_python_docstring_purpose","text":"Extract Purpose from a Python module docstring.","title":"Function extract_python_docstring_purpose"},{"location":"api/#function-extract_vue_purpose","text":"Extract Purpose from the first Vue or <style> block.</p> <h3 id=\"function-extract_line_comment_purpose\">Function <code>extract_line_comment_purpose</code></h3> <p>Extract Purpose from a line-comment header block.</p> <h3 id=\"function-resolve_purpose_style\">Function <code>resolve_purpose_style</code></h3> <p>Resolve the Purpose style for a file extension.</p> <h3 id=\"function-extract_purpose_header\">Function <code>extract_purpose_header</code></h3> <p>Extract the Purpose summary for a file by type.</p> <h3 id=\"function-validate_summary\">Function <code>validate_summary</code></h3> <p>Validate a Purpose summary against map rules.</p> <h3 id=\"function-build_file_records\">Function <code>build_file_records</code></h3> <p>Build file records and error lists for Purpose headers.</p> <h3 id=\"function-read_nonsource_file_entries\">Function <code>read_nonsource_file_entries</code></h3> <p>Read non-source file list entries for files without headers.</p> <h3 id=\"function-merge_nonsource_file_records\">Function <code>merge_nonsource_file_records</code></h3> <p>Merge non-source file records into the auto-discovered list.</p> <h3 id=\"function-read_folder_purpose\">Function <code>read_folder_purpose</code></h3> <p>Read a folder Purpose summary from a .purpose file.</p> <h3 id=\"function-build_folder_records\">Function <code>build_folder_records</code></h3> <p>Build folder records from per-folder .purpose files.</p> <h3 id=\"function-build_folder_tree_with_summaries\">Function <code>build_folder_tree_with_summaries</code></h3> <p>Build a stable tree snapshot with folder summaries.</p> <h3 id=\"function-build_summary_duplicates\">Function <code>build_summary_duplicates</code></h3> <p>Find duplicate summaries across records.</p> <h3 id=\"function-compute_file_hash\">Function <code>compute_file_hash</code></h3> <p>Compute the file list hash for the map output.</p> <h3 id=\"function-compute_folder_hash\">Function <code>compute_folder_hash</code></h3> <p>Compute the folder list hash for the map output.</p> <h3 id=\"function-compute_overview\">Function <code>compute_overview</code></h3> <p>Compute overview counts for the map header.</p> <h3 id=\"function-format_overview\">Function <code>format_overview</code></h3> <p>Format the overview mapping for the map header.</p> <h3 id=\"function-read_overview\">Function <code>read_overview</code></h3> <p>Read the overview line from the map file.</p> <h3 id=\"function-read_map_hashes\">Function <code>read_map_hashes</code></h3> <p>Read file and folder hashes from the current map file.</p> <h3 id=\"function-format_list\">Function <code>format_list</code></h3> <p>Format items as a newline-separated bullet list.</p> <h2 id=\"clipy\"><code>cli.py</code></h2> <p>Purpose: Provide the ProjectAtlas command-line entry points.</p> <h3 id=\"function-is_truthy_env\">Function <code>is_truthy_env</code></h3> <p>Check whether an environment value is truthy.</p> <h3 id=\"function-build_snapshot\">Function <code>build_snapshot</code></h3> <p>Build an AtlasSnapshot for the current repository.</p> <h3 id=\"function-seed_purpose_files\">Function <code>seed_purpose_files</code></h3> <p>Create missing .purpose files for tracked folders.</p> <h3 id=\"function-write_default_files\">Function <code>write_default_files</code></h3> <p>Write default configuration and non-source file template.</p> <h3 id=\"function-run_map\">Function <code>run_map</code></h3> <p>Generate and write the ProjectAtlas map.</p> <h3 id=\"function-run_lint\">Function <code>run_lint</code></h3> <p>Validate the ProjectAtlas map against current repo state.</p> <h3 id=\"function-parse_args\">Function <code>parse_args</code></h3> <p>Parse CLI arguments.</p> <h3 id=\"function-main\">Function <code>main</code></h3> <p>Run the ProjectAtlas CLI.</p> <h2 id=\"configpy\"><code>config.py</code></h2> <p>Purpose: Load and normalize ProjectAtlas configuration from TOML.</p> <h3 id=\"class-configerror\">Class <code>ConfigError</code></h3> <p>Signal an invalid ProjectAtlas configuration.</p> <h3 id=\"class-atlasconfig\">Class <code>AtlasConfig</code></h3> <p>Define the normalized configuration for ProjectAtlas.</p> <h3 id=\"function-find_config_path\">Function <code>find_config_path</code></h3> <p>Locate the first ProjectAtlas config file under the root.</p> <h3 id=\"function-_as_set\">Function <code>_as_set</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-_as_list\">Function <code>_as_list</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-_as_map\">Function <code>_as_map</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-_as_path\">Function <code>_as_path</code></h3> <p><em>No docstring provided.</em></p> <h3 id=\"function-load_config\">Function <code>load_config</code></h3> <p>Load ProjectAtlas configuration from TOML (or defaults).</p> <h3 id=\"function-default_config_text\">Function <code>default_config_text</code></h3> <p>Return a config.toml payload for the provided settings.</p> <h3 id=\"function-build_config_text\">Function <code>build_config_text</code></h3> <p>Build a config.toml payload from the supplied settings.</p> <h3 id=\"function-detect_language_extensions\">Function <code>detect_language_extensions</code></h3> <p>Detect source extensions in a repo using the default language list.</p> <h3 id=\"function-detect_purpose_styles\">Function <code>detect_purpose_styles</code></h3> <p>Return a Purpose style map for detected extensions.</p> <h2 id=\"modelspy\"><code>models.py</code></h2> <p>Purpose: Define data models used across ProjectAtlas.</p> <h3 id=\"class-record\">Class <code>Record</code></h3> <p>Represent a ProjectAtlas record entry.</p> <h3 id=\"class-atlassnapshot\">Class <code>AtlasSnapshot</code></h3> <p>Capture the full ProjectAtlas snapshot to write.</p> <h2 id=\"outputpy\"><code>output.py</code></h2> <p>Purpose: Write ProjectAtlas snapshots to TOON or JSON outputs.</p> <h3 id=\"function-to_toon\">Function <code>to_toon</code></h3> <p>Serialize the snapshot to TOON.</p> <h3 id=\"function-write_toon\">Function <code>write_toon</code></h3> <p>Write the snapshot to the configured TOON path.</p> <h3 id=\"function-write_json\">Function <code>write_json</code></h3> <p>Write the snapshot to a JSON file next to the TOON output.</p>","title":"Function extract_vue_purpose"},{"location":"concepts/","text":"Concepts ProjectAtlas is a lightweight way to keep structural intent close to the codebase and visible to agents. Folder purpose files Each folder has a .purpose file with a single-line summary. This keeps intent discoverable from the tree view. ProjectAtlas treats missing .purpose files as a lint error when --strict-folders is enabled. File Purpose headers Each tracked source file carries a one-line Purpose: header near the top of the file. The comment style is configurable per extension (Javadoc blocks, block comments, or line comments). This allows: quick file selection before deep indexing early detection of duplicate responsibilities consistent, low-overhead documentation Non-source summaries Some files cannot safely carry inline Purpose headers (JSON, lockfiles, images, generated outputs). Those live in .projectatlas/projectatlas-nonsource-files.toon , which is merged into the atlas at map time. The generated projectatlas.toon still shows a single files[] list, but the header distinguishes tracked_source_files , tracked_nonsource_files , and the combined tracked_files_total . Health signals ProjectAtlas surfaces: missing or invalid Purpose summaries duplicate summaries across files or folders untracked assets outside approved roots These signals are meant to prompt cleanup before the structure drifts.","title":"Concepts"},{"location":"concepts/#concepts","text":"ProjectAtlas is a lightweight way to keep structural intent close to the codebase and visible to agents.","title":"Concepts"},{"location":"concepts/#folder-purpose-files","text":"Each folder has a .purpose file with a single-line summary. This keeps intent discoverable from the tree view. ProjectAtlas treats missing .purpose files as a lint error when --strict-folders is enabled.","title":"Folder purpose files"},{"location":"concepts/#file-purpose-headers","text":"Each tracked source file carries a one-line Purpose: header near the top of the file. The comment style is configurable per extension (Javadoc blocks, block comments, or line comments). This allows: quick file selection before deep indexing early detection of duplicate responsibilities consistent, low-overhead documentation","title":"File Purpose headers"},{"location":"concepts/#non-source-summaries","text":"Some files cannot safely carry inline Purpose headers (JSON, lockfiles, images, generated outputs). Those live in .projectatlas/projectatlas-nonsource-files.toon , which is merged into the atlas at map time. The generated projectatlas.toon still shows a single files[] list, but the header distinguishes tracked_source_files , tracked_nonsource_files , and the combined tracked_files_total .","title":"Non-source summaries"},{"location":"concepts/#health-signals","text":"ProjectAtlas surfaces: missing or invalid Purpose summaries duplicate summaries across files or folders untracked assets outside approved roots These signals are meant to prompt cleanup before the structure drifts.","title":"Health signals"},{"location":"configuration/","text":"ProjectAtlas Configuration ProjectAtlas reads projectatlas.toml or .projectatlas/config.toml . All paths are relative to the config file. [project] root = \".\" map_path = \".projectatlas/projectatlas.toon\" nonsource_files_path = \".projectatlas/projectatlas-nonsource-files.toon\" purpose_filename = \".purpose\" [scan] source_extensions = [\".py\", \".js\", \".ts\", \".tsx\", \".jsx\", \".vue\", \".css\", \".mjs\", \".cjs\", \".d.ts\", \".java\", \".kt\", \".scala\", \".cs\", \".go\", \".rs\", \".rb\", \".php\", \".c\", \".h\", \".cpp\", \".hpp\", \".cc\", \".cxx\", \".swift\", \".lua\", \".sh\", \".bash\", \".zsh\", \".ps1\", \".psm1\", \".psd1\", \".sql\"] exclude_dir_names = [\".git\", \".projectatlas\", \".venv\", \"__pycache__\", \"node_modules\", \"dist\", \"build\"] exclude_dir_suffixes = [\".egg-info\"] exclude_path_prefixes = [] non_source_path_prefixes = [] max_scan_lines = 80 [purpose] default_style = \"javadoc\" line_comment_prefixes = [\"//\", \"#\", \"--\", \";\"] # styles_by_extension = { \".go\" = \"line-comment\", \".c\" = \"block-comment\" } [summary_rules] ascii_only = true no_commas = true max_length = 140 [untracked] allowed_filenames = [\".purpose\"] allowlist_dir_prefixes = [] allowlist_files = [] asset_allowed_prefixes = [] asset_extensions = [\".png\", \".jpg\", \".jpeg\", \".svg\", \".gif\", \".webp\", \".ico\", \".pdf\", \".ttf\", \".woff\", \".woff2\"] projectatlas init auto-detects repo languages and writes the config with the detected extensions by default. Pass --no-detect-languages to keep the static template. Purpose styles purpose.default_style controls the fallback header style ( javadoc , block-comment , or line-comment ). purpose.styles_by_extension maps specific extensions to a style. purpose.line_comment_prefixes controls which line-comment prefixes are recognized. Example: [purpose] default_style = \"javadoc\" line_comment_prefixes = [\"//\", \"#\", \"--\", \";\"] [purpose.styles_by_extension] \".go\" = \"line-comment\" \".rs\" = \"line-comment\" \".c\" = \"block-comment\" Non-source file list If you set project.nonsource_files_path , ProjectAtlas reads a TOON file with a nonsource_files[]: section. This file is agent-maintained input for non-source summaries (configs, docs, assets) and is merged into the generated atlas. The legacy project.manual_files_path key is still accepted for backward compatibility. nonsource_files[]: path/to/file.txt,One line purpose summary These entries are merged into the file list for non-source or config files that cannot carry headers.","title":"Configuration"},{"location":"configuration/#projectatlas-configuration","text":"ProjectAtlas reads projectatlas.toml or .projectatlas/config.toml . All paths are relative to the config file. [project] root = \".\" map_path = \".projectatlas/projectatlas.toon\" nonsource_files_path = \".projectatlas/projectatlas-nonsource-files.toon\" purpose_filename = \".purpose\" [scan] source_extensions = [\".py\", \".js\", \".ts\", \".tsx\", \".jsx\", \".vue\", \".css\", \".mjs\", \".cjs\", \".d.ts\", \".java\", \".kt\", \".scala\", \".cs\", \".go\", \".rs\", \".rb\", \".php\", \".c\", \".h\", \".cpp\", \".hpp\", \".cc\", \".cxx\", \".swift\", \".lua\", \".sh\", \".bash\", \".zsh\", \".ps1\", \".psm1\", \".psd1\", \".sql\"] exclude_dir_names = [\".git\", \".projectatlas\", \".venv\", \"__pycache__\", \"node_modules\", \"dist\", \"build\"] exclude_dir_suffixes = [\".egg-info\"] exclude_path_prefixes = [] non_source_path_prefixes = [] max_scan_lines = 80 [purpose] default_style = \"javadoc\" line_comment_prefixes = [\"//\", \"#\", \"--\", \";\"] # styles_by_extension = { \".go\" = \"line-comment\", \".c\" = \"block-comment\" } [summary_rules] ascii_only = true no_commas = true max_length = 140 [untracked] allowed_filenames = [\".purpose\"] allowlist_dir_prefixes = [] allowlist_files = [] asset_allowed_prefixes = [] asset_extensions = [\".png\", \".jpg\", \".jpeg\", \".svg\", \".gif\", \".webp\", \".ico\", \".pdf\", \".ttf\", \".woff\", \".woff2\"] projectatlas init auto-detects repo languages and writes the config with the detected extensions by default. Pass --no-detect-languages to keep the static template.","title":"ProjectAtlas Configuration"},{"location":"configuration/#purpose-styles","text":"purpose.default_style controls the fallback header style ( javadoc , block-comment , or line-comment ). purpose.styles_by_extension maps specific extensions to a style. purpose.line_comment_prefixes controls which line-comment prefixes are recognized. Example: [purpose] default_style = \"javadoc\" line_comment_prefixes = [\"//\", \"#\", \"--\", \";\"] [purpose.styles_by_extension] \".go\" = \"line-comment\" \".rs\" = \"line-comment\" \".c\" = \"block-comment\"","title":"Purpose styles"},{"location":"configuration/#non-source-file-list","text":"If you set project.nonsource_files_path , ProjectAtlas reads a TOON file with a nonsource_files[]: section. This file is agent-maintained input for non-source summaries (configs, docs, assets) and is merged into the generated atlas. The legacy project.manual_files_path key is still accepted for backward compatibility. nonsource_files[]: path/to/file.txt,One line purpose summary These entries are merged into the file list for non-source or config files that cannot carry headers.","title":"Non-source file list"},{"location":"format/","text":"TOON Output Format ProjectAtlas writes a atlas.toon snapshot with these sections: version: 1 generated_at: 2026-01-01T12:00:00Z file_hash: \"...\" folder_hash: \"...\" root: . overview: tracked_source_files=12 tracked_nonsource_files=4 tracked_files_total=16 tracked_folders=8 source_extensions=9 exclude_dir_names=6 exclude_path_prefixes=0 source_extensions[]: - .py exclude_dir_names[]: - .git exclude_path_prefixes[]: - docs/generated folders[3]{path,summary,source}: .,Project root,purpose files[4]{path,summary,source}: src/main.py,Main entry,header folder_summary_duplicates[]: - Shared utils :: src/utils | app/utils file_summary_duplicates[]: - Shared helpers :: src/helpers.py | app/helpers.py folder_tree[]: - . - Project root - src/ - Application source Sections are stable so agents can scan quickly and tooling can diff. Overview fields tracked_source_files counts files scanned for Purpose headers (source extensions). tracked_nonsource_files counts entries supplied by projectatlas-nonsource-files.toon . tracked_files_total is the combined total shown in files[] . The remaining fields ( tracked_folders , source_extensions , exclude_* ) describe the scan surface. Non-source list The generated atlas merges the manual .projectatlas/projectatlas-nonsource-files.toon entries into files[] so the snapshot stays complete without forcing headers into formats that cannot safely accept them.","title":"Format"},{"location":"format/#toon-output-format","text":"ProjectAtlas writes a atlas.toon snapshot with these sections: version: 1 generated_at: 2026-01-01T12:00:00Z file_hash: \"...\" folder_hash: \"...\" root: . overview: tracked_source_files=12 tracked_nonsource_files=4 tracked_files_total=16 tracked_folders=8 source_extensions=9 exclude_dir_names=6 exclude_path_prefixes=0 source_extensions[]: - .py exclude_dir_names[]: - .git exclude_path_prefixes[]: - docs/generated folders[3]{path,summary,source}: .,Project root,purpose files[4]{path,summary,source}: src/main.py,Main entry,header folder_summary_duplicates[]: - Shared utils :: src/utils | app/utils file_summary_duplicates[]: - Shared helpers :: src/helpers.py | app/helpers.py folder_tree[]: - . - Project root - src/ - Application source Sections are stable so agents can scan quickly and tooling can diff.","title":"TOON Output Format"},{"location":"format/#overview-fields","text":"tracked_source_files counts files scanned for Purpose headers (source extensions). tracked_nonsource_files counts entries supplied by projectatlas-nonsource-files.toon . tracked_files_total is the combined total shown in files[] . The remaining fields ( tracked_folders , source_extensions , exclude_* ) describe the scan surface.","title":"Overview fields"},{"location":"format/#non-source-list","text":"The generated atlas merges the manual .projectatlas/projectatlas-nonsource-files.toon entries into files[] so the snapshot stays complete without forcing headers into formats that cannot safely accept them.","title":"Non-source list"},{"location":"workflow/","text":"Workflow and Troubleshooting ProjectAtlas is designed to run locally and produce a deterministic map. Recommended workflow projectatlas init --seed-purpose (first-time setup). Add Purpose headers to new source files. Add or update .purpose summaries for new folders. Run projectatlas map . Run projectatlas lint --strict-folders --report-untracked . Open a PR that references the GitHub issue (CI requires #NNN in title or body). Commit map updates and any Purpose changes. Install git hooks with python scripts/install_hooks.py to enforce issue references in commit messages. The pre-push hook runs python scripts/check_all.py to validate map/lint/tests/build. One-command local verification Run the full local check suite with: python scripts/check_all.py Issue hygiene Every issue should carry a type:* label plus a priority:* and status:* label. Use status:backlog for unscheduled work. Any issue referenced by a PR must be assigned to the target release milestone (CI enforces this). Keep public issues/PRs/release notes free of private or internal-only details (release notes are generated from PR text). Review expectations At least one approval is required before merging. Automated reviews (Codex/Copilot) should be checked via gh pr view <PR> --comments or gh pr view <PR> --json reviews . Documentation site 04-Docs publishes to the gh-pages branch using mkdocs gh-deploy . GitHub Pages should be configured to serve from gh-pages . Branching dev for active development. main for stable releases only. Merge dev -> main via pull request after CI is green. Ensure dev includes the latest main changes before releasing. Use python scripts/prepare_release.py --issue <NNN> --bump patch to create a release branch and PR. If dev is behind main , the script will stop unless you pass --allow-base-divergence . Add --post-release to open a dev PR that bumps to the next .dev version. Pushes to main create a GitHub release when the version is not a .dev build. The auto-release workflow generates GitHub release notes from merged PRs. CI behavior projectatlas map skips in CI unless you pass --force . projectatlas lint validates that the map is current. PRs must reference a GitHub issue ( scripts/check_pr_issue_reference.py ). CI can be run manually via workflow_dispatch when checks do not auto-trigger. Environment toggles: PROJECTATLAS_SKIP_UPDATE=1 skips map generation locally. PROJECTATLAS_ALLOW_UNTRACKED=1 allows local builds while still reporting untracked files. Troubleshooting Map is stale If lint reports stale hashes or an overview mismatch, re-run: projectatlas map The overview: line in the atlas now reports tracked_source_files , tracked_nonsource_files , and tracked_files_total so you can see the split at a glance. Missing Purpose headers Add a Purpose: header using the comment style configured for that file extension (Javadoc block, block comment, or line comment). For Python, use a module docstring. If the file uses a different style, update purpose.styles_by_extension in the config. Missing .purpose files Create a .purpose file in the folder and add a one-line summary. You can seed them with: projectatlas seed-purpose Untracked files Use --report-untracked to list non-source files. Either: add to the non-source file list ( .projectatlas/projectatlas-nonsource-files.toon ) (agent-maintained input for non-source summaries) add to allowlists/exclusions move into an approved asset root Schema reference The TOON schema is documented in docs/format.md .","title":"Workflow"},{"location":"workflow/#workflow-and-troubleshooting","text":"ProjectAtlas is designed to run locally and produce a deterministic map.","title":"Workflow and Troubleshooting"},{"location":"workflow/#recommended-workflow","text":"projectatlas init --seed-purpose (first-time setup). Add Purpose headers to new source files. Add or update .purpose summaries for new folders. Run projectatlas map . Run projectatlas lint --strict-folders --report-untracked . Open a PR that references the GitHub issue (CI requires #NNN in title or body). Commit map updates and any Purpose changes. Install git hooks with python scripts/install_hooks.py to enforce issue references in commit messages. The pre-push hook runs python scripts/check_all.py to validate map/lint/tests/build.","title":"Recommended workflow"},{"location":"workflow/#one-command-local-verification","text":"Run the full local check suite with: python scripts/check_all.py","title":"One-command local verification"},{"location":"workflow/#issue-hygiene","text":"Every issue should carry a type:* label plus a priority:* and status:* label. Use status:backlog for unscheduled work. Any issue referenced by a PR must be assigned to the target release milestone (CI enforces this). Keep public issues/PRs/release notes free of private or internal-only details (release notes are generated from PR text).","title":"Issue hygiene"},{"location":"workflow/#review-expectations","text":"At least one approval is required before merging. Automated reviews (Codex/Copilot) should be checked via gh pr view <PR> --comments or gh pr view <PR> --json reviews .","title":"Review expectations"},{"location":"workflow/#documentation-site","text":"04-Docs publishes to the gh-pages branch using mkdocs gh-deploy . GitHub Pages should be configured to serve from gh-pages .","title":"Documentation site"},{"location":"workflow/#branching","text":"dev for active development. main for stable releases only. Merge dev -> main via pull request after CI is green. Ensure dev includes the latest main changes before releasing. Use python scripts/prepare_release.py --issue <NNN> --bump patch to create a release branch and PR. If dev is behind main , the script will stop unless you pass --allow-base-divergence . Add --post-release to open a dev PR that bumps to the next .dev version. Pushes to main create a GitHub release when the version is not a .dev build. The auto-release workflow generates GitHub release notes from merged PRs.","title":"Branching"},{"location":"workflow/#ci-behavior","text":"projectatlas map skips in CI unless you pass --force . projectatlas lint validates that the map is current. PRs must reference a GitHub issue ( scripts/check_pr_issue_reference.py ). CI can be run manually via workflow_dispatch when checks do not auto-trigger. Environment toggles: PROJECTATLAS_SKIP_UPDATE=1 skips map generation locally. PROJECTATLAS_ALLOW_UNTRACKED=1 allows local builds while still reporting untracked files.","title":"CI behavior"},{"location":"workflow/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"workflow/#map-is-stale","text":"If lint reports stale hashes or an overview mismatch, re-run: projectatlas map The overview: line in the atlas now reports tracked_source_files , tracked_nonsource_files , and tracked_files_total so you can see the split at a glance.","title":"Map is stale"},{"location":"workflow/#missing-purpose-headers","text":"Add a Purpose: header using the comment style configured for that file extension (Javadoc block, block comment, or line comment). For Python, use a module docstring. If the file uses a different style, update purpose.styles_by_extension in the config.","title":"Missing Purpose headers"},{"location":"workflow/#missing-purpose-files","text":"Create a .purpose file in the folder and add a one-line summary. You can seed them with: projectatlas seed-purpose","title":"Missing .purpose files"},{"location":"workflow/#untracked-files","text":"Use --report-untracked to list non-source files. Either: add to the non-source file list ( .projectatlas/projectatlas-nonsource-files.toon ) (agent-maintained input for non-source summaries) add to allowlists/exclusions move into an approved asset root","title":"Untracked files"},{"location":"workflow/#schema-reference","text":"The TOON schema is documented in docs/format.md .","title":"Schema reference"}]}